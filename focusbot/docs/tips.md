## Tipsé›†

> .env.localãŒãªãœå¿…è¦ã‹

æ©Ÿå¯†æƒ…å ±ã‚„å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚­ãƒ¼ï¼ˆFirebaseã‚„OpenAIãªã©ï¼‰ã‚’ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥æ›¸ã‹ãšã€.env.local ã«ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ã®ãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šãƒ»é–‹ç™ºåŠ¹ç‡ä¸Šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹  
â€» GitHubãªã©ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¬é–‹ã—ãªã„ã‚ˆã†ã«æ³¨æ„  
æœ¬ç•ªç’°å¢ƒã¨é–‹ç™ºç’°å¢ƒã§ã‚­ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ãƒ¡ãƒªãƒƒãƒˆ

> .env.local > NEXT_PUBLIC_ ã®æ„å‘³

Next.js ã§ã¯ .env.local ã«æ›¸ã‹ã‚ŒãŸç’°å¢ƒå¤‰æ•°ã®ã†ã¡ã€NEXT_PUBLIC_ ã‚’ã¤ã‘ãŸå¤‰æ•°ã ã‘ãŒãƒ–ãƒ©ã‚¦ã‚¶å´ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚‹ã€‚
NEXT_PUBLIC_ã€œ â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚‚ä½¿ãˆã‚‹

ãã‚Œä»¥å¤–ï¼ˆä¾‹ï¼šOPENAI_API_KEYï¼‰ â†’ ã‚µãƒ¼ãƒãƒ¼å´ã ã‘ï¼ˆAPI Routeså†…ãªã©ï¼‰

ğŸ”’ OpenAIã®APIã‚­ãƒ¼ã¯çµ¶å¯¾ã«ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰ç›´æ¥ä½¿ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚APIçµŒç”±ã§ä½¿ã†ã‚ˆã†ã«ã—ã¾ã™ã€‚

> firebaseã‚’ãªãœæ¡ç”¨ã™ã‚‹ã‹

â†’ Googleæä¾›ã®BaaS
Firestore â†’ å­¦ç¿’ãƒ—ãƒ©ãƒ³ã‚„ã‚¿ã‚¹ã‚¯ã®ä¿å­˜ãƒ»å–å¾—
Authentication â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†
ä»Šå›ã®ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã«å­¦ç¿’ãƒ—ãƒ©ãƒ³ã‚’ä¿å­˜ãƒ»å–å¾—ã™ã‚‹ã€è¦ä»¶ã«å¿…é ˆã€‚
Firestoreã¯NoSQLãªã®ã§ã€æ§‹é€ ã®è‡ªç”±åº¦ãŒé«˜ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«å­¦ç¿’ãƒ—ãƒ©ãƒ³ã‚„ã‚¿ã‚¹ã‚¯ã‚’æŸ”è»Ÿã«ç®¡ç†ã§ãã‚‹

> axiosã‚’ãªãœæ¡ç”¨ã™ã‚‹ã‹

â†’ HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆfetchã®ãƒ©ãƒƒãƒ‘ãƒ¼ï¼‰

ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰APIãƒ«ãƒ¼ãƒˆã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ã«ä½¿ã†
ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æ–‡ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹æ•´å‚™ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šãªã©ãŒä¾¿åˆ©
POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„APIã‚¨ãƒ©ãƒ¼å‡¦ç†ãŒã¨ã¦ã‚‚ç°¡æ½”ã«æ›¸ã‘ã‚‹ã€‚

> process.env.NEXT_PUBLIC_...! ã® ã€Œ!ã€ ã¯ãªãœå¿…è¦ï¼Ÿ

lib/firebase.ts
TypeScriptã§ã€Œç’°å¢ƒå¤‰æ•°ã¯å¿…ãšã‚ã‚‹ã‚ˆã€ã¨æ˜ç¤ºã™ã‚‹ãŸã‚ã® Non-null assertion
.env.local ã«å€¤ãŒå…¥ã£ã¦ã„ãªã„ã¨ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ã€å®‰å…¨æ€§å‘ä¸Šã«ã‚‚å½¹ç«‹ã¤

> POST(req: Request) ã‚’ä½¿ã†ç†ç”±

src/app/api/gpt/route.ts 
- GETã§ã¯ã‚»ã‚­ãƒ¥ã‚¢ãªå…¥åŠ›é€ä¿¡ãŒé›£ã—ã„ï¼ˆURLã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒå‡ºã¦ã—ã¾ã†ï¼‰
- POSTã§ã‚ã‚Œã°JSONå½¢å¼ã§é€ä¿¡ã§ãã€å®‰å…¨ã‹ã¤æŸ”è»Ÿ

> NextResponse.json() ã‚’ä½¿ã†ç†ç”±

src/app/api/gpt/route.ts 
- App Routerã§ã¯ res.status(200).json() ã®ã‚ˆã†ãªæ—§å¼ã§ã¯ãªãã€NextResponse ã‚’ä½¿ã†ã®ãŒæ¨™æº–
- å‹å®‰å…¨ã§ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚ç°¡æ½”ã«è¨˜è¿°å¯èƒ½